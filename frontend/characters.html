{% extends "base.html" %}
{% block head %}
    {{ super() }}
    <title>Characters</title>
{% endblock %}

{% block content %}
    {{ super() }}
    <div class="container">
        <table id="character-table" class="table table-striped" style="text-align: center">
         {% for char in characters %}

            {% if loop.index0 % 5 == 0 %}
                {% if loop.index0 != 0 %}
                    <tr>
                {% else %}
                    </tr><tr>
                {% endif %}
            {% endif %}

             <td>
                 <a href="character/{{ char }}">
                     <img src="{{ url_for('static', filename='characters/{}.png'.format(char)) }}"/>
                     <br/>
                     <span>{{ char }}</span>
                 </a>
             </td>
         {% endfor %}
        </table>
    </div>
    <script>
        $('button.character-button').click((e) => {
            let el = e.target;
            if (el.tagName !== 'BUTTON')
                el = el.parentElement;
            const char = el.dataset.character;
            $.ajax({
                url: `character/${char}`,
                method: "PUT"
            }).then(() => {
                console.log('ayyy');
                window.location.href = `character/${char}`
            });
        });
    </script>
{% endblock %}